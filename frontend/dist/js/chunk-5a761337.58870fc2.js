(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a761337"],{"0096":function(e,t,a){},1585:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"app-container"},[a("CommonQuery",[a("template",{slot:"button1"},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:e.createData}},[e._v(" 新建 ")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:e.handleMultipleDelete}},[e._v(" 批量删除 ")])],1),a("template",{slot:"query1"},[a("div",{staticClass:"common_search_wrapper",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.queryModel.brandName,expression:"queryModel.brandName"}],attrs:{placeholder:"请输入游戏名称",type:"text"},domProps:{value:e.queryModel.brandName},on:{input:function(t){t.target.composing||e.$set(e.queryModel,"brandName",t.target.value)}}})]),a("a",[a("span",{staticClass:"el-icon-search",on:{click:e.search}})])])])],2),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.tableList,height:e.tableHeight,border:"","element-loading-text":"Loading",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),a("el-table-column",{attrs:{align:"center",fixed:"",label:"No",type:"index",width:"45"}}),a("el-table-column",{attrs:{align:"center",label:"header名称",prop:"name",width:"200"}}),a("el-table-column",{attrs:{align:"center",label:"爬虫类型",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.currentEditingCrawlerId!==t.row.headerId?a("div",[e._l(e.getCrawlerType(t),(function(n,i){return a("el-tag",{key:n.code,attrs:{type:"success"}},[e._v(" "+e._s(e.getCrawlerType(t).length>0?n.name:"")+" ")])})),a("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"text"},on:{click:function(a){return e.handleChangeCralerType(t)}}})],2):a("div",[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.$store.state.app.dictionary["crawler"],(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1),a("el-button",{attrs:{icon:"el-icon-check",size:"mini",type:"text"},on:{click:e.saveHeaderTypes}}),a("el-button",{attrs:{icon:"el-icon-close",size:"mini",type:"text"},on:{click:function(t){e.currentEditingCrawlerId=""}}})],1)]}}])}),a("el-table-column",{attrs:{align:"center",label:"header键名",prop:"headerKeyName"}}),a("el-table-column",{attrs:{align:"center",label:"header值名",prop:"headerValueName"}}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleUpdate(t)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"common_pagination_wrapper"},[a("el-pagination",{attrs:{"current-page":e.pagination.page,"page-size":e.pagination.limit,"page-sizes":[10,20,30,50,100],total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"850px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-row",{attrs:{justify:"center",type:"flex"}},[a("el-col",{attrs:{span:20}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"label-position":"right","label-width":"140px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.$store.state.app.dictionary["crawler"],(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("el-form-item",{attrs:{label:"header键名",prop:"headerKeyName"}},[a("el-input",{attrs:{disabled:"third_link"===e.formData.rewardType},model:{value:e.formData.headerKeyName,callback:function(t){e.$set(e.formData,"headerKeyName",t)},expression:"formData.headerKeyName"}})],1),a("el-form-item",{attrs:{label:"header值名",prop:"headerValueName"}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:8},type:"textarea"},model:{value:e.formData.headerValueName,callback:function(t){e.$set(e.formData,"headerValueName",t)},expression:"formData.headerValueName"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(e._s(e.$t("table.cancel")))]),"create"===e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:e.createData}},[e._v(e._s(e.$t("table.confirm")))]):a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:e.updateData}},[e._v(e._s(e.$t("table.confirm")))])],1)],1)],1)},i=[],r=a("1da1"),o=(a("d3b7"),a("4de4"),a("b0c0"),a("99af"),a("25f0"),a("d81d"),a("159b"),a("96cf"),a("a8f4")),s=a("3b8a"),l={components:{CommonTag:o["a"],CommonQuery:s["a"]},data:function(){var e=this;return{getListRequest:"headerSettings/getList",createOrUpdateRequest:"headerSettings/createOrUpdate",deleteHeaderRequest:"headerSettings/deleteHeader",getDictionaryListRequest:"dictionary/getList",tableList:[],total:null,listLoading:!0,queryModel:{sort:"desc",brandName:""},pagination:{page:1,limit:50},sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],formData:{headerId:"",name:"",type:"",headerKeyName:"",headerValueName:""},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"Edit",create:"Create"},dialogPvVisible:!1,currentEditingCrawlerId:"",currentEditingCrawlerCode:"",rules:{headerId:[{required:!0,message:"此项为必填项",trigger:"change"}],name:[{required:!0,message:"此项为必填项",trigger:"change"}],type:[{required:!0,message:"此项为必填项",trigger:"change"}],headerKeyName:[{required:!0,message:"此项为必填项",trigger:"change"}],headerValueName:[{required:!0,message:"此项为必填项",trigger:"change"}]},typeList:[],pickerOptions1:{disabledDate:function(t){return t.getTime()<e.value1}},fileList:[],portraitParams:{bucketName:"funyvalley",folderName:"icon"},expandQuery:""}},computed:{tableHeight:function(){return this.$store.state.app.tableHeight},dictionaryList:function(){return this.$store.state.app.dictionary}},watch:{effectiveDuration:function(e){console.log(e),null===e&&(e=[]),this.formData.startDate=this.$moment(e[0]).format("YYYY-MM-DD"),this.formData.endDate=this.$moment(e[1]).format("YYYY-MM-DD")},currentAdvertisementTabIndex:function(e){console.log(e)}},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=e.$store,t.next=3,e.getDictionaryList();case 3:t.t1=t.sent,t.t2={crawler:t.t1},t.t0.commit.call(t.t0,"updateDictionary",t.t2),e.getTableData(),console.log(e.dictionaryList);case 8:case"end":return t.stop()}}),t)})))()},methods:{getTableData:function(){var e=this;this.listLoading=!0,this.queryModel=Object.assign(this.queryModel,this.pagination),this.$http.get(this.$baseUrl+this.getListRequest,{params:this.queryModel}).then((function(t){console.log("getListByPaginationRequest",t),e.tableList=t.data,e.total=t.pagination.total,e.listLoading=!1}))},getDictionaryList:function(){var e=this;return new Promise((function(t,a){e.$http.get(e.$baseUrl+e.getDictionaryListRequest,{params:{typeCode:"crawler"}}).then((function(e){t(e.data)})).catch((function(e){console.log(e),a(e)}))}))},getCrawlerType:function(e){return this.$store.state.app.dictionary["crawler"].filter((function(t){return t.code===e.row.type}))},handleFilter:function(){this.pagination.page=1,this.getTableData()},handleSizeChange:function(e){this.pagination.limit=e,this.getTableData()},handleCurrentChange:function(e){this.pagination.page=e,this.getTableData()},resetTemp:function(){this.formData={id:"",description:"",rewardImage:"",rewardName:"",rewardPrompt:"",rewardStr:"",rewardType:"",rewardValue:"",status:""}},createData:function(){this.dialogFormVisible=!0,this.formData.headerId="",this.resetTemp()},handleUpdate:function(e){var t=this;console.log(e),this.formData=Object.assign({},e.row),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["formData"].clearValidate()}))},updateData:function(){var e=this;this.$refs["formData"].validate((function(t){t&&e.commitUpdate()}))},handleChangeCralerType:function(e){this.currentEditingCrawlerId=e.row.headerId,this.formData=Object.assign({},e.row)},saveHeaderTypes:function(){this.commitUpdate(),this.currentEditingCrawlerId=""},commitUpdate:function(){var e=this;this.$http.post(this.$baseUrl+this.createOrUpdateRequest,{headerId:this.formData.headerId,name:this.formData.name,type:JSON.stringify(this.formData.type),headerKeyName:this.formData.headerKeyName,headerValueName:this.formData.headerValueName}).then((function(t){console.log(t),e.dialogFormVisible=!1,e.$message.success("信息修改成功"),e.getTableData()})).catch((function(t){console.log(t),e.$message.error("".concat(t.response.status.toString(),"  ").concat(t.response.data.error))}))},handleSelectionChange:function(e){this.multipleSelection=e,console.log(e)},handleMultipleDelete:function(){var e=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteRecord(e.multipleSelection.map((function(e){return e.id})))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleDelete:function(e){var t=this;console.log(e),this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRecord([e.row.id])})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},deleteRecord:function(e){var t=this;this.$http.delete(this.$baseUrl+this.deleteRecordRequest,{data:{id:e}}).then((function(e){console.log(e),t.dialogFormVisible=!1,t.$message.success("删除成功"),t.getTableData()})).catch((function(e){console.log(e),t.$message.error("".concat(e.response.status.toString(),"  ").concat(e.response.data.error))}))},expand:function(){this.expandQuery=!this.expandQuery},search:function(){this.getTableData()},reset:function(){this.queryModel.available=!0},uploadSuccess1:function(e){console.log(e),this.formData.icon=e.url},uploadSuccess2:function(e){this.formData.rewardImage=e.url},changeDailyLimitMode:function(e){this.formData.dailyLimit="unlimited"===e.toString()?"-1":this.formData.dailyLimit},changeLimitMode:function(e){this.formData.limit="unlimited"===e.toString()?"-1":this.formData.limit,alert(this.formData.limit)},chooseRewardType:function(e){console.log(e)},chooseThirdPartyProduct:function(e){this.chosenThirdPartyProductInfo=e},confirmCrawlerSetting:function(){this.crawlerSettingFlag=!1,this.$message.success("设置成功")},focusSortList:function(e,t){var a=this;this.loading=!0,this.$http.get(this.$baseUrl+this.queryRewardProductByNameRequest,{params:{name:this.chosenReward}}).then((function(e){console.log(e),a.loading=!1;var n=[];0!==e.data.length&&(e.data.forEach((function(e,t){n.push(Object.assign(e,{value:e.name}))})),console.log(111,n),t(n))}))}}},c=l,u=(a("7faa"),a("2877")),d=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=d.exports},"4df4":function(e,t,a){"use strict";var n=a("0366"),i=a("7b0b"),r=a("9bdd"),o=a("e95a"),s=a("50c4"),l=a("8418"),c=a("35a1");e.exports=function(e){var t,a,u,d,m,p,h=i(e),f="function"==typeof this?this:Array,g=arguments.length,y=g>1?arguments[1]:void 0,b=void 0!==y,v=c(h),w=0;if(b&&(y=n(y,g>2?arguments[2]:void 0,2)),void 0==v||f==Array&&o(v))for(t=s(h.length),a=new f(t);t>w;w++)p=b?y(h[w],w):h[w],l(a,w,p);else for(d=v.call(h),m=d.next,a=new f;!(u=m.call(d)).done;w++)p=b?r(d,y,[u.value,w],!0):u.value,l(a,w,p);return a.length=w,a}},"7faa":function(e,t,a){"use strict";a("0096")},"9bdd":function(e,t,a){var n=a("825a"),i=a("2a62");e.exports=function(e,t,a,r){try{return r?t(n(a)[0],a[1]):t(a)}catch(o){throw i(e),o}}},a630:function(e,t,a){var n=a("23e7"),i=a("4df4"),r=a("1c7e"),o=!r((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:o},{from:i})},a8f4:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"common_tag_wrapper"},[a("el-col",{attrs:{span:2}},[e._v(e._s(e.title))]),a("el-col",{attrs:{span:22}},[e._l(e.dynamicTags,(function(t,n){return a("el-tag",{key:n,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])})),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{ref:"saveTagInput",staticClass:"button",attrs:{size:"small"},on:{blur:e.handleInputConfirm,click:e.showInput},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},[e._v("添加版本 ")])],2)],1)},i=[];function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function o(e){if(Array.isArray(e))return r(e)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function s(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}a("fb6a"),a("b0c0");function l(e,t){if(e){if("string"===typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){return o(e)||s(e)||l(e)||c()}a("99af"),a("a434");var d={name:"CommonTag",props:{metaData:{type:Array,default:function(){return[]},required:!1},title:{type:String,default:"",required:!1},tagData:{type:Array,default:[],required:!1},buttonText:{type:String,default:"+",required:!1}},data:function(){return{dynamicTags:[],inputVisible:!1,inputValue:""}},watch:{tagData:function(e){console.log(e),e.length>=0?this.dynamicTags=e:this.$message.error("tag列表数据类型不正确")}},mounted:function(){this.dynamicTags=this.tagData},methods:{handleInputConfirm:function(){var e=this,t=this.inputValue;t&&this.dynamicTags.push(t),this.inputVisible=!1,this.inputValue="",this.$emit.apply(this,["add",this.dynamicTags].concat(u(e.metaData)))},handleClose:function(e){var t=this;this.$emit.apply(this,["delete",e,this.dynamicTags.indexOf(e)].concat(u(t.metaData))),this.dynamicTags.splice(this.dynamicTags.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))}}},m=d,p=a("2877"),h=Object(p["a"])(m,n,i,!1,null,"8021313e",null);t["a"]=h.exports},d28b:function(e,t,a){var n=a("746f");n("iterator")}}]);
//# sourceMappingURL=chunk-5a761337.58870fc2.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e9168dc"],{cff1:function(e,t,a){"use strict";a("d668")},d668:function(e,t,a){},e5be:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"app-container"},[a("CommonQuery",[a("template",{slot:"button1"},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:function(t){e.oneKeyCrawlFlag=!0}}},[e._v(" 一键抓取 ")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:e.handleMultipleDelete}},[e._v(" 批量删除 ")])],1),a("template",{slot:"query1"},[a("div",{staticClass:"common_search_wrapper",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.queryModel.brandName,expression:"queryModel.brandName"}],attrs:{placeholder:"请输入游戏名称",type:"text"},domProps:{value:e.queryModel.brandName},on:{input:function(t){t.target.composing||e.$set(e.queryModel,"brandName",t.target.value)}}})]),a("a",[a("span",{staticClass:"el-icon-search",on:{click:e.search}})])])])],2),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.tableList,height:e.tableHeight,border:"","element-loading-text":"Loading",fit:"","highlight-current-row":""},on:{"row-click":e.handleClickRow,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),a("el-table-column",{attrs:{align:"center",fixed:"",label:"No",type:"index",width:"45"}}),a("el-table-column",{attrs:{align:"center",label:"电影名称",prop:"movieName",width:"200"}}),a("el-table-column",{attrs:{align:"center",label:"抓取时间",prop:"timestamp",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.$moment(Number(t.row.timestamp)).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"综合票房（万）",prop:"boxInfo"}}),a("el-table-column",{attrs:{align:"center",label:"票房占比",prop:"boxRate"}}),a("el-table-column",{attrs:{align:"center",label:"总票房",prop:"sumBoxInfo"}}),a("el-table-column",{attrs:{align:"center",label:"分账综合票房（万）",prop:"splitBoxInfo"}}),a("el-table-column",{attrs:{align:"center",label:"分账票房占比",prop:"splitBoxRate"}}),a("el-table-column",{attrs:{align:"center",label:"分账总票房",prop:"splitSumBoxInfo"}}),a("el-table-column",{attrs:{align:"center",label:"上映情况",prop:"releaseInfo"}}),a("el-table-column",{attrs:{align:"center",label:"上座率",prop:"seatRate"}}),a("el-table-column",{attrs:{align:"center",label:"排片场次",prop:"showInfo"}}),a("el-table-column",{attrs:{align:"center",label:"排片占比",prop:"showRate"}}),a("el-table-column",{attrs:{align:"center",label:"场均人次",prop:"avgShowView"}}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"common_pagination_wrapper"},[a("el-pagination",{attrs:{"current-page":e.pagination.page,"page-size":e.pagination.limit,"page-sizes":[10,20,30,50,100],total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.oneKeyCrawlFlag,width:"850px"},on:{"update:visible":function(t){e.oneKeyCrawlFlag=t}}},[a("el-row",{attrs:{justify:"center",type:"flex"}},[a("el-col",{attrs:{span:20}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"label-position":"right","label-width":"140px"}},[a("el-form-item",{attrs:{label:"爬虫类型",prop:"rewardType"}},[a("el-select",{attrs:{placeholder:""},on:{change:e.chooseRewardType},model:{value:e.formData.rewardType,callback:function(t){e.$set(e.formData,"rewardType",t)},expression:"formData.rewardType"}},e._l(e.settingsList,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"爬虫地址",prop:"crawlerAddress"}},[a("el-input",{model:{value:e.formData.crawlerAddress,callback:function(t){e.$set(e.formData,"crawlerAddress",t)},expression:"formData.crawlerAddress"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(t){e.oneKeyCrawlFlag=!1}}},[e._v(e._s(e.$t("table.cancel")))]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:e.crawlerData}},[e._v(e._s(e.$t("table.confirm")))])],1)],1)],1)},r=[],i=a("1da1"),o=(a("d81d"),a("d3b7"),a("a4d3"),a("e01a"),a("99af"),a("25f0"),a("4de4"),a("159b"),a("b0c0"),a("96cf"),a("3b8a")),s={components:{CommonQuery:o["a"]},data:function(){var e=this;return{getListByPaginationRequest:"crawlerMaoyanBoxOffice/getListByPagination",crawlAndSaveRequest:"crawlerMaoyanBoxOffice/crawlAndSave",deleteRecordRequest:"crawlerMaoyanBoxOffice/deleteRecords",getSettingsRequest:"settings/getList",crawlerSettingFlag:!1,crawlerSetting:{address:""},chosenReward:"",chooseRewardTypeModel:{},chosenThirdPartyProductInfo:{},value2:"",value1:"",dailyLimitMode:"",limitMode:"",tableKey:0,tableList:[],total:null,listLoading:!0,availabilityFlag:!1,statusDictionary:[{code:0,name:"未上线"},{code:1,name:"上线"}],queryModel:{sort:"desc",brandName:""},pagination:{page:1,limit:50},importanceOptions:[1,2,3],sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],statusOptions:["published","draft","deleted"],showReviewer:!1,formData:{headerCode:"maoyan",crawlerAddress:""},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"Edit",create:"Create"},dialogPvVisible:!1,rules:{id:[{required:!0,message:"此项为必填项",trigger:"change"}],description:[{required:!0,message:"此项为必填项",trigger:"change"}],name:[{required:!0,message:"此项为必填项",trigger:"change"}],dailyLimit:[{required:!0,message:"此项为必填项",trigger:"change"}],limit:[{required:!0,message:"此项为必填项",trigger:"change"}],startDate:[{required:!0,message:"此项为必填项",trigger:"change"}],endDate:[{required:!0,message:"此项为必填项",trigger:"change"}],status:[{required:!0,message:"此项为必填项",trigger:"change"}]},downloadLoading:!1,pickerOptions0:{disabledDate:function(t){if(""!==e.value2)return t.getTime()>e.value2}},pickerOptions1:{disabledDate:function(t){return t.getTime()<e.value1}},fileList:[],portraitParams:{bucketName:"funyvalley",folderName:"icon"},iosVersionListData:[],androidVersionListData:[],searchTxt:"",expandQuery:"",showFileListFlag:!1,newFile:"",advertisementDialogFlag:!1,currentAdvertisementTabIndex:0,effectiveDuration:[],multipleSelection:[],oneKeyCrawlFlag:!1,settingsList:[]}},computed:{tableHeight:function(){return this.$store.state.app.tableHeight},dictionaryList:function(){return this.$store.state.app.dictionary.crawlerAddress}},watch:{effectiveDuration:function(e){console.log(e),null===e&&(e=[]),this.formData.startDate=this.$moment(e[0]).format("YYYY-MM-DD"),this.formData.endDate=this.$moment(e[1]).format("YYYY-MM-DD")},currentAdvertisementTabIndex:function(e){console.log(e)}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getSettingsDictionary();case 2:e.settingsList=t.sent,e.getTableData();case 4:case"end":return t.stop()}}),t)})))()},methods:{getTableData:function(){var e=this;this.listLoading=!0,this.queryModel=Object.assign(this.queryModel,this.pagination),this.$http.get(this.$baseUrl+this.getListByPaginationRequest,{params:this.queryModel}).then((function(t){console.log("getListByPaginationRequest",t);var a=t.data.map((function(e,t){return Object.assign(e,{_index:t})}));e.tableList=a,e.total=t.pagination.total,e.listLoading=!1}))},getSettingsDictionary:function(){var e=this;return new Promise((function(t,a){e.$http.get(e.$baseUrl+e.getSettingsRequest,{params:{type:"crawlerAddress"}}).then((function(e){t(e.data)})).catch((function(e){console.log(e),a(e)}))}))},handleFilter:function(){this.pagination.page=1,this.getTableData()},handleSizeChange:function(e){this.pagination.limit=e,this.getTableData()},handleCurrentChange:function(e){this.pagination.page=e,this.getTableData()},resetTemp:function(){this.formData={id:"",description:"",rewardImage:"",rewardName:"",rewardPrompt:"",rewardStr:"",rewardType:"",rewardValue:"",status:""}},crawlerData:function(){var e=this;this.$http.post(this.$baseUrl+this.crawlAndSaveRequest,{address:this.formData.crawlerAddress,headerCode:this.formData.headerCode}).then((function(t){console.log(t),e.$message.success("抓取成功"),e.getTableData(),e.oneKeyCrawlFlag=!1}))},createData:function(){this.formData.id="",this.updateData()},handleUpdate:function(e){var t=this;console.log(e),this.formData=Object.assign({},e.row),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["formData"].clearValidate()}))},updateData:function(){var e=this;this.$refs["formData"].validate((function(t){t&&e.$http.post(e.$baseUrl+e.addAndUpdateRewardInfoRequest,{id:e.formData.id,description:e.formData.description,rewardImage:e.formData.rewardImage,rewardName:e.formData.rewardName,rewardPrompt:e.formData.rewardPrompt,rewardStr:e.formData.rewardStr,rewardType:e.formData.rewardType,rewardValue:e.formData.rewardValue,status:e.formData.status}).then((function(t){console.log(t),e.dialogFormVisible=!1,e.$message.success("信息修改成功"),e.getTableData()})).catch((function(t){console.log(t),e.$message.error("".concat(t.response.status.toString(),"  ").concat(t.response.data.error))}))}))},handleSelectionChange:function(e){this.multipleSelection=e,console.log(e)},handleMultipleDelete:function(){var e=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteRecord(e.multipleSelection.map((function(e){return e.id})))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleDelete:function(e){var t=this;console.log(e),this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRecord([e.row.id])})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},deleteRecord:function(e){var t=this;this.$http.delete(this.$baseUrl+this.deleteRecordRequest,{data:{id:e}}).then((function(e){console.log(e),t.dialogFormVisible=!1,t.$message.success("删除成功"),t.getTableData()})).catch((function(e){console.log(e),t.$message.error("".concat(e.response.status.toString(),"  ").concat(e.response.data.error))}))},expand:function(){this.expandQuery=!this.expandQuery},search:function(){this.getTableData()},reset:function(){this.queryModel.available=!0},uploadSuccess1:function(e){console.log(e),this.formData.icon=e.url},uploadSuccess2:function(e){this.formData.rewardImage=e.url},changeDailyLimitMode:function(e){this.formData.dailyLimit="unlimited"===e.toString()?"-1":this.formData.dailyLimit},changeLimitMode:function(e){this.formData.limit="unlimited"===e.toString()?"-1":this.formData.limit,alert(this.formData.limit)},chooseRewardType:function(e){this.formData.type=this.settingsList.filter((function(t){return t.value===e}))[0].code,this.formData.crawlerAddress=e},chooseThirdPartyProduct:function(e){this.chosenThirdPartyProductInfo=e},confirmCrawlerSetting:function(){this.crawlerSettingFlag=!1,this.$message.success("设置成功")},focusSortList:function(e,t){var a=this;this.loading=!0,this.$http.get(this.$baseUrl+this.queryRewardProductByNameRequest,{params:{name:this.chosenReward}}).then((function(e){console.log(e),a.loading=!1;var n=[];0!==e.data.length&&(e.data.forEach((function(e,t){n.push(Object.assign(e,{value:e.name}))})),console.log(111,n),t(n))}))},handleClickRow:function(e,t,a){console.log("row",e),console.log("column",t),console.log("e",a)}}},l=s,c=(a("cff1"),a("2877")),d=Object(c["a"])(l,n,r,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-5e9168dc.afb8604b.js.map
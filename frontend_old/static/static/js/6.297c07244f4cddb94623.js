(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"02K0":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default={name:"CommonQuery",props:{queryModel:{type:Object,default:function e(){return{}}},expandQuery:{type:Object,default:function e(){return{}}},expand:{type:Boolean,default:false}},data:function e(){return{expandFlag:false}},watch:{queryModel:function e(){},expand:function e(t){this.expandFlag=t}},methods:{search:function e(){},reset:function e(){this.$emit("reset")},handleExpand:function e(){this.expandFlag=!this.expandFlag;console.log(this.expandFlag)}}}},"1aDl":function(e,t,a){"use strict";var n=function(){var a=this;var e=a.$createElement;var n=a._self._c||e;return n("el-row",{staticClass:"app-container"},[n("CommonQuery",[n("template",{slot:"button1"},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:a.createData}},[a._v("\n        新建\n      ")]),a._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:a.handleMultipleDelete}},[a._v("\n        批量删除\n      ")])],1),a._v(" "),n("template",{slot:"query1"},[n("div",{staticClass:"common_search_wrapper",on:{keyup:function(e){if(!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")){return null}return a.search(e)}}},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:a.queryModel.brandName,expression:"queryModel.brandName"}],attrs:{placeholder:"请输入游戏名称",type:"text"},domProps:{value:a.queryModel.brandName},on:{input:function(e){if(e.target.composing){return}a.$set(a.queryModel,"brandName",e.target.value)}}})]),a._v(" "),n("a",[n("span",{staticClass:"el-icon-search",on:{click:a.search}})])])])],2),a._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:a.listLoading,expression:"listLoading",modifiers:{body:true}}],attrs:{data:a.tableList,height:a.tableHeight,border:"","element-loading-text":"Loading",fit:"","highlight-current-row":""},on:{"selection-change":a.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"40"}}),a._v(" "),n("el-table-column",{attrs:{align:"center",fixed:"",label:"No",type:"index",width:"45"}}),a._v(" "),n("el-table-column",{attrs:{align:"center",label:"设置名称",prop:"name",width:"200"}}),a._v(" "),n("el-table-column",{attrs:{align:"center",label:"设置Code",prop:"code"}}),a._v(" "),n("el-table-column",{attrs:{align:"center",label:"设置类型",prop:"type"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n        "+a._s(a.getCrawlerType(e))+"\n      ")]}}])}),a._v(" "),n("el-table-column",{attrs:{align:"center",label:"值",prop:"value"},scopedSlots:a._u([{key:"default",fn:function(t){return[n("el-button",{on:{click:function(e){return a.checkValue(t)}}},[a._v("查看")])]}}])}),a._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"200px"},scopedSlots:a._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return a.handleUpdate(t)}}},[a._v("编辑")]),a._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return a.handleDelete(t)}}},[a._v("删除")])]}}])})],1),a._v(" "),n("div",{staticClass:"common_pagination_wrapper"},[n("el-pagination",{attrs:{"current-page":a.pagination.page,"page-size":a.pagination.limit,"page-sizes":[10,20,30,50,100],total:a.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return a.$set(a.pagination,"page",e)},"update:current-page":function(e){return a.$set(a.pagination,"page",e)},"current-change":a.handleCurrentChange,"size-change":a.handleSizeChange}})],1),a._v(" "),n("el-dialog",{attrs:{title:a.textMap[a.dialogStatus],visible:a.dialogFormVisible,width:"850px"},on:{"update:visible":function(e){a.dialogFormVisible=e}}},[n("el-row",{attrs:{justify:"center",type:"flex"}},[n("el-col",{attrs:{span:20}},[n("el-form",{ref:"formData",attrs:{model:a.formData,rules:a.rules,"label-position":"right","label-width":"140px"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{model:{value:a.formData.name,callback:function(e){a.$set(a.formData,"name",e)},expression:"formData.name"}})],1),a._v(" "),n("el-form-item",{attrs:{label:"Code",prop:"code"}},[n("el-input",{model:{value:a.formData.code,callback:function(e){a.$set(a.formData,"code",e)},expression:"formData.code"}})],1),a._v(" "),n("el-form-item",{attrs:{label:"类型",prop:"type"}},[a._v("\n            "+a._s(a.$store.state.app.dictionary)+"\n\n            "),n("el-select",{attrs:{placeholder:"请选择"},model:{value:a.formData.type,callback:function(e){a.$set(a.formData,"type",e)},expression:"formData.type"}},a._l(a.dictionaryList.settings,function(e){return n("el-option",{key:e.dictionaryId,attrs:{label:e.name,value:e.code}})}),1)],1),a._v(" "),n("el-form-item",{attrs:{label:"值",prop:"value"}},[n("el-input",{attrs:{autosize:{minRows:2,maxRows:8},type:"textarea"},model:{value:a.formData.value,callback:function(e){a.$set(a.formData,"value",e)},expression:"formData.value"}})],1)],1)],1)],1),a._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(e){a.dialogFormVisible=false}}},[a._v(a._s(a.$t("table.cancel")))]),a._v(" "),a.dialogStatus==="create"?n("el-button",{attrs:{type:"primary"},on:{click:a.createData}},[a._v(a._s(a.$t("table.confirm")))]):n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:a.updateData}},[a._v(a._s(a.$t("table.confirm")))])],1)],1),a._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":false,title:a.textMap[a.dialogStatus],visible:a.valueViewerFlag,width:"850px"},on:{"update:visible":function(e){a.valueViewerFlag=e}}},[n("el-row",{attrs:{justify:"center",type:"flex"}},[n("el-col",{attrs:{span:20}},[n("el-form",{ref:"formData",attrs:{model:a.formData,rules:a.rules,"label-position":"right","label-width":"50px"}},[n("el-form-item",{attrs:{label:"值",prop:"name"}},[n("el-input",{attrs:{autosize:{minRows:16,maxRows:32},type:"textarea"},model:{value:a.formData.value,callback:function(e){a.$set(a.formData,"value",e)},expression:"formData.value"}})],1)],1)],1)],1),a._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(e){a.valueViewerFlag=false}}},[a._v(a._s(a.$t("table.cancel")))]),a._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:a.updateValue}},[a._v(a._s(a.$t("table.confirm")))])],1)],1)],1)};var i=[];n._withStripped=true;a.d(t,"a",function(){return n});a.d(t,"b",function(){return i})},"7gnG":function(e,t,a){"use strict";a.r(t);var n=a("1aDl");var i=a("nX1U");for(var r in i)if(r!=="default")(function(e){a.d(t,e,function(){return i[e]})})(r);var o=a("7uZC");var s=a("KHd+");var l=Object(s["a"])(i["default"],n["a"],n["b"],false,null,null,null);if(false){var u}l.options.__file="src/views/settings/Settings.vue";t["default"]=l.exports},"7uZC":function(e,t,a){"use strict";var n=a("V0hn");var i=a.n(n);var r=i.a},EDYP:function(e,t,a){"use strict";var n=function(){var e=this;var t=e.$createElement;var a=e._self._c||t;return a("div",{staticClass:"common_querytable_wrapper"},[a("div",{staticClass:"queryform_wrapper"},[a("div",{staticClass:"outside"},[a("el-form",{staticClass:"basearea"},[a("ul",{staticClass:"pull-left"},[a("li",[e._t("button1")],2)])]),e._v(" "),a("ul",{staticClass:"operation_wrapper pull-right"},[a("li",[e._t("query1")],2),e._v(" "),a("li",[e._t("query2")],2),e._v(" "),a("li",[e._t("query3")],2),e._v(" "),e.expand?a("li",[a("el-button",{staticClass:"expand",attrs:{size:"mini",type:"text"},on:{click:e.handleExpand}},[e._v("高级搜索"),a("i",{staticClass:"el-icon-arrow-down"})])],1):e._e()])],1),e._v(" "),a("div",{staticClass:"expandarea",class:{active:e.expandFlag}},[a("el-form",{ref:"form",attrs:{model:e.queryModel,size:"mini","label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[e._t("query4")],2),e._v(" "),a("el-col",{attrs:{span:8}}),e._v(" "),a("el-col",{attrs:{span:8}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}}),e._v(" "),a("el-col",{attrs:{span:8}}),e._v(" "),a("el-col",{attrs:{span:8}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:23,"pull-right":""}},[a("el-form-item",{staticClass:"pull-right"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索\n              ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置\n              ")])],1)],1)],1)],1)],1)])])};var i=[];n._withStripped=true;a.d(t,"a",function(){return n});a.d(t,"b",function(){return i})},O4qd:function(e,t,a){"use strict";a.r(t);var n=a("EDYP");var i=a("vPuT");for(var r in i)if(r!=="default")(function(e){a.d(t,e,function(){return i[e]})})(r);var o=a("KHd+");var s=Object(o["a"])(i["default"],n["a"],n["b"],false,null,"63580e73",null);if(false){var l}s.options.__file="src/views/common/CommonQuery.vue";t["default"]=s.exports},Pbti:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=a("4d7F");var i=g(n);var r=a("P2sY");var o=g(r);var s=a("14Xm");var l=g(s);var u=a("D3Ub");var c=g(u);var d=a("qPSc");var f=g(d);var p=a("O4qd");var m=g(p);function g(e){return e&&e.__esModule?e:{default:e}}t.default={components:{CommonTag:f.default,CommonQuery:m.default},data:function e(){var a=this;return{getListRequest:"settings/getList",createOrUpdateRequest:"settings/createOrUpdate",deleteItemsRequest:"settings/deleteItems",getDictionaryRequest:"dictionary/getList",tableList:[],total:null,listLoading:true,queryModel:{sort:"desc"},pagination:{page:1,limit:50},sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],formData:{settingId:"",name:"",type:"",code:"",value:""},dialogFormVisible:false,dialogStatus:"",textMap:{update:"Edit",create:"Create"},dialogPvVisible:false,valueViewerFlag:false,currentEditingCrawlerId:"",currentEditingCrawlerCode:"",rules:{settingId:[{required:true,message:"此项为必填项",trigger:"change"}],name:[{required:true,message:"此项为必填项",trigger:"change"}],type:[{required:true,message:"此项为必填项",trigger:"change"}],code:[{required:true,message:"此项为必填项",trigger:"change"}],value:[{required:true,message:"此项为必填项",trigger:"change"}]},typeList:[],valueViewerContent:{},pickerOptions1:{disabledDate:function e(t){return t.getTime()<a.value1}},fileList:[],portraitParams:{bucketName:"funyvalley",folderName:"icon"},expandQuery:""}},computed:{tableHeight:function e(){return this.$store.state.app.tableHeight},dictionaryList:function e(){return this.$store.state.app.dictionary}},watch:{effectiveDuration:function e(t){console.log(t);if(t===null){t=[]}this.formData.startDate=this.$moment(t[0]).format("YYYY-MM-DD");this.formData.endDate=this.$moment(t[1]).format("YYYY-MM-DD")},currentAdvertisementTabIndex:function e(t){console.log(t)}},mounted:function e(){var n=this;return(0,c.default)(l.default.mark(function e(){var a;return l.default.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return n.getSettingsDictionary();case 2:a=t.sent;n.$store.commit("updateDictionary",{settings:a});console.log("mounted",n.$store.state.app.dictionary);n.getTableData();console.log("dictionaryList",n.dictionaryList.settings);case 7:case"end":return t.stop()}}},e,n)}))()},methods:{getTableData:function e(){var t=this;this.listLoading=true;this.queryModel=(0,o.default)(this.queryModel,this.pagination);this.$http.get(this.$baseUrl+this.getListRequest,{params:this.queryModel}).then(function(e){console.log("getListByPaginationRequest",e);t.tableList=e.data;t.total=e.pagination.total;t.listLoading=false})},getSettingsDictionary:function e(){var n=this;return new i.default(function(t,a){n.$http.get(n.$baseUrl+n.getDictionaryRequest,{params:{typeCode:"settings"}}).then(function(e){t(e.data)}).catch(function(e){console.log(e);a(e)})})},getCrawlerType:function e(t){var a=this.$store.state.app.dictionary["settings"].filter(function(e){return e.code===t.row.type});return a.length>0?a[0].name:""},handleFilter:function e(){this.pagination.page=1;this.getTableData()},handleSizeChange:function e(t){this.pagination.limit=t;this.getTableData()},handleCurrentChange:function e(t){this.pagination.page=t;this.getTableData()},resetTemp:function e(){this.formData={id:"",settingId:"",name:"",type:"",code:"",value:""}},createData:function e(){this.dialogFormVisible=true;this.formData.settingId="";this.resetTemp()},checkValue:function e(t){this.valueViewerFlag=true;this.formData=(0,o.default)({},t.row)},updateValue:function e(){var a=this;return(0,c.default)(l.default.mark(function e(){return l.default.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return a.commitUpdate();case 2:a.getTableData();a.valueViewerFlag=false;case 4:case"end":return t.stop()}}},e,a)}))()},handleUpdate:function e(t){var a=this;console.log(t);this.formData=(0,o.default)({},t.row);this.dialogStatus="update";this.dialogFormVisible=true;this.$nextTick(function(){a.$refs["formData"].clearValidate()})},updateData:function e(){var n=this;this.$refs["formData"].validate(function(){var t=(0,c.default)(l.default.mark(function e(a){return l.default.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!a){t.next=4;break}t.next=3;return n.commitUpdate();case 3:n.getTableData();case 4:case"end":return t.stop()}}},e,n)}));return function(e){return t.apply(this,arguments)}}())},handleChangeCralerType:function e(t){this.currentEditingCrawlerId=t.row.settingId;this.formData=(0,o.default)({},t.row)},saveHeaderTypes:function e(){this.commitUpdate();this.currentEditingCrawlerId=""},commitUpdate:function e(){var n=this;return new i.default(function(t,a){n.$http.post(n.$baseUrl+n.createOrUpdateRequest,{settingId:n.formData.settingId,name:n.formData.name,type:n.formData.type,code:n.formData.code,value:n.formData.value.trim("&nbsp")}).then(function(e){console.log(e);n.dialogFormVisible=false;n.$message.success("信息修改成功");t(e)}).catch(function(e){console.log(e);n.$message.error(e.response.status.toString()+"  "+e.response.data.error);a(e)})})},handleSelectionChange:function e(t){this.multipleSelection=t;console.log(t)},handleMultipleDelete:function e(){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteItem(t.multipleSelection.map(function(e){return e.id}))}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleDelete:function e(t){var a=this;console.log(t);this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.deleteItem(t.row.settingId)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},deleteItem:function e(t){var a=this;this.$http.delete(this.$baseUrl+this.deleteItemsRequest,{data:{settingId:t}}).then(function(e){console.log(e);a.dialogFormVisible=false;a.$message.success("删除成功");a.getTableData()}).catch(function(e){console.log(e);a.$message.error(e.response.status.toString()+"  "+e.response.data.error)})},expand:function e(){this.expandQuery=!this.expandQuery},search:function e(){this.getTableData()},reset:function e(){this.queryModel.available=true},uploadSuccess1:function e(t){console.log(t);this.formData.icon=t.url},uploadSuccess2:function e(t){this.formData.rewardImage=t.url},changeDailyLimitMode:function e(t){this.formData.dailyLimit=t.toString()==="unlimited"?"-1":this.formData.dailyLimit},changeLimitMode:function e(t){this.formData.limit=t.toString()==="unlimited"?"-1":this.formData.limit;alert(this.formData.limit)},chooseRewardType:function e(t){console.log(t)},chooseThirdPartyProduct:function e(t){this.chosenThirdPartyProductInfo=t},confirmCrawlerSetting:function e(){this.crawlerSettingFlag=false;this.$message.success("设置成功")},focusSortList:function e(t,n){var i=this;this.loading=true;this.$http.get(this.$baseUrl+this.queryRewardProductByNameRequest,{params:{name:this.chosenReward}}).then(function(e){console.log(e);i.loading=false;var a=[];if(e.data.length!==0){e.data.forEach(function(e,t){a.push((0,o.default)(e,{value:e.name}))});console.log(111,a);n(a)}})}}}},RzdK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=a("m1cH");var i=r(n);function r(e){return e&&e.__esModule?e:{default:e}}t.default={name:"CommonTag",props:{metaData:{type:Array,default:function e(){return[]},required:false},title:{type:String,default:"",required:false},tagData:{type:Array,default:[],required:false},buttonText:{type:String,default:"+",required:false}},data:function e(){return{dynamicTags:[],inputVisible:false,inputValue:""}},watch:{tagData:function e(t){console.log(t);if(t.length>=0){this.dynamicTags=t}else{this.$message.error("tag列表数据类型不正确")}}},mounted:function e(){this.dynamicTags=this.tagData},methods:{handleInputConfirm:function e(){var t=this;var a=this.inputValue;if(a){this.dynamicTags.push(a)}this.inputVisible=false;this.inputValue="";this.$emit.apply(this,["add",this.dynamicTags].concat((0,i.default)(t.metaData)))},handleClose:function e(t){var a=this;this.$emit.apply(this,["delete",t,this.dynamicTags.indexOf(t)].concat((0,i.default)(a.metaData)));this.dynamicTags.splice(this.dynamicTags.indexOf(t),1)},showInput:function e(){var t=this;this.inputVisible=true;this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})}}}},V0hn:function(e,t,a){if(false){var n}},btSa:function(e,t,a){"use strict";var n=function(){var a=this;var e=a.$createElement;var n=a._self._c||e;return n("el-row",{staticClass:"common_tag_wrapper"},[n("el-col",{attrs:{span:2}},[a._v(a._s(a.title))]),a._v(" "),n("el-col",{attrs:{span:22}},[a._l(a.dynamicTags,function(t,e){return n("el-tag",{key:e,attrs:{closable:"","disable-transitions":false},on:{close:function(e){return a.handleClose(t)}}},[a._v("\n      "+a._s(t)+"\n    ")])}),a._v(" "),a.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input",attrs:{size:"small"},on:{blur:a.handleInputConfirm},nativeOn:{keyup:function(e){if(!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")){return null}return a.handleInputConfirm(e)}},model:{value:a.inputValue,callback:function(e){a.inputValue=e},expression:"inputValue"}}):n("el-button",{ref:"saveTagInput",staticClass:"button",attrs:{size:"small"},on:{blur:a.handleInputConfirm,click:a.showInput},nativeOn:{keyup:function(e){if(!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")){return null}return a.handleInputConfirm(e)}},model:{value:a.inputValue,callback:function(e){a.inputValue=e},expression:"inputValue"}},[a._v("添加版本\n    ")])],2)],1)};var i=[];n._withStripped=true;a.d(t,"a",function(){return n});a.d(t,"b",function(){return i})},hcDs:function(e,t,a){"use strict";a.r(t);var n=a("RzdK");var i=a.n(n);for(var r in n)if(r!=="default")(function(e){a.d(t,e,function(){return n[e]})})(r);t["default"]=i.a},nX1U:function(e,t,a){"use strict";a.r(t);var n=a("Pbti");var i=a.n(n);for(var r in n)if(r!=="default")(function(e){a.d(t,e,function(){return n[e]})})(r);t["default"]=i.a},qPSc:function(e,t,a){"use strict";a.r(t);var n=a("btSa");var i=a("hcDs");for(var r in i)if(r!=="default")(function(e){a.d(t,e,function(){return i[e]})})(r);var o=a("KHd+");var s=Object(o["a"])(i["default"],n["a"],n["b"],false,null,"9ec8b5f6",null);if(false){var l}s.options.__file="src/views/common/CommonTag.vue";t["default"]=s.exports},vPuT:function(e,t,a){"use strict";a.r(t);var n=a("02K0");var i=a.n(n);for(var r in n)if(r!=="default")(function(e){a.d(t,e,function(){return n[e]})})(r);t["default"]=i.a}}]);
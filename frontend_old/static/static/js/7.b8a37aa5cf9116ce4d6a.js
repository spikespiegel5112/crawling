(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"02K0":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default={name:"CommonQuery",props:{queryModel:{type:Object,default:function e(){return{}}},expandQuery:{type:Object,default:function e(){return{}}},expand:{type:Boolean,default:false}},data:function e(){return{expandFlag:false}},watch:{queryModel:function e(){},expand:function e(t){this.expandFlag=t}},methods:{search:function e(){},reset:function e(){this.$emit("reset")},handleExpand:function e(){this.expandFlag=!this.expandFlag;console.log(this.expandFlag)}}}},"5b7z":function(e,t,a){"use strict";a.r(t);var r=a("SwTA");var n=a("MZl5");for(var i in n)if(i!=="default")(function(e){a.d(t,e,function(){return n[e]})})(i);var o=a("z/Gj");var l=a("KHd+");var s=Object(l["a"])(n["default"],r["a"],r["b"],false,null,null,null);if(false){var c}s.options.__file="src/views/crawling/Maoyan.vue";t["default"]=s.exports},EDYP:function(e,t,a){"use strict";var r=function(){var e=this;var t=e.$createElement;var a=e._self._c||t;return a("div",{staticClass:"common_querytable_wrapper"},[a("div",{staticClass:"queryform_wrapper"},[a("div",{staticClass:"outside"},[a("el-form",{staticClass:"basearea"},[a("ul",{staticClass:"pull-left"},[a("li",[e._t("button1")],2)])]),e._v(" "),a("ul",{staticClass:"operation_wrapper pull-right"},[a("li",[e._t("query1")],2),e._v(" "),a("li",[e._t("query2")],2),e._v(" "),a("li",[e._t("query3")],2),e._v(" "),e.expand?a("li",[a("el-button",{staticClass:"expand",attrs:{size:"mini",type:"text"},on:{click:e.handleExpand}},[e._v("高级搜索"),a("i",{staticClass:"el-icon-arrow-down"})])],1):e._e()])],1),e._v(" "),a("div",{staticClass:"expandarea",class:{active:e.expandFlag}},[a("el-form",{ref:"form",attrs:{model:e.queryModel,size:"mini","label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[e._t("query4")],2),e._v(" "),a("el-col",{attrs:{span:8}}),e._v(" "),a("el-col",{attrs:{span:8}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}}),e._v(" "),a("el-col",{attrs:{span:8}}),e._v(" "),a("el-col",{attrs:{span:8}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:23,"pull-right":""}},[a("el-form-item",{staticClass:"pull-right"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索\n              ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置\n              ")])],1)],1)],1)],1)],1)])])};var n=[];r._withStripped=true;a.d(t,"a",function(){return r});a.d(t,"b",function(){return n})},MZl5:function(e,t,a){"use strict";a.r(t);var r=a("ZPOm");var n=a.n(r);for(var i in r)if(i!=="default")(function(e){a.d(t,e,function(){return r[e]})})(i);t["default"]=n.a},NOzE:function(e,t,a){if(false){var r}},O4qd:function(e,t,a){"use strict";a.r(t);var r=a("EDYP");var n=a("vPuT");for(var i in n)if(i!=="default")(function(e){a.d(t,e,function(){return n[e]})})(i);var o=a("KHd+");var l=Object(o["a"])(n["default"],r["a"],r["b"],false,null,"63580e73",null);if(false){var s}l.options.__file="src/views/common/CommonQuery.vue";t["default"]=l.exports},SwTA:function(e,t,a){"use strict";var r=function(){var a=this;var e=a.$createElement;var r=a._self._c||e;return r("el-row",{staticClass:"app-container"},[r("CommonQuery",[r("template",{slot:"button1"},[r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:function(e){a.oneKeyCrawlFlag=true}}},[a._v("\n        一键抓取\n      ")]),a._v(" "),r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:a.handleMultipleDelete}},[a._v("\n        批量删除\n      ")])],1),a._v(" "),r("template",{slot:"query1"},[r("div",{staticClass:"common_search_wrapper",on:{keyup:function(e){if(!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")){return null}return a.search(e)}}},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:a.queryModel.brandName,expression:"queryModel.brandName"}],attrs:{placeholder:"请输入游戏名称",type:"text"},domProps:{value:a.queryModel.brandName},on:{input:function(e){if(e.target.composing){return}a.$set(a.queryModel,"brandName",e.target.value)}}})]),a._v(" "),r("a",[r("span",{staticClass:"el-icon-search",on:{click:a.search}})])])])],2),a._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:a.listLoading,expression:"listLoading",modifiers:{body:true}}],attrs:{data:a.tableList,height:a.tableHeight,border:"","element-loading-text":"Loading",fit:"","highlight-current-row":""},on:{"row-click":a.handleClickRow,"selection-change":a.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"40"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",fixed:"",label:"No",type:"index",width:"45"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"电影名称",prop:"movieName",width:"200"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"抓取时间",prop:"timestamp",width:"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n        "+a._s(a.$moment(Number(e.row.timestamp)).format("YYYY-MM-DD HH:mm:ss"))+"\n      ")]}}])}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"综合票房（万）",prop:"boxInfo"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"票房占比",prop:"boxRate"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"总票房",prop:"sumBoxInfo"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"分账综合票房（万）",prop:"splitBoxInfo"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"分账票房占比",prop:"splitBoxRate"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"分账总票房",prop:"splitSumBoxInfo"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"上映情况",prop:"releaseInfo"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"上座率",prop:"seatRate"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"排片场次",prop:"showInfo"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"排片占比",prop:"showRate"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"场均人次",prop:"avgShowView"}}),a._v(" "),r("el-table-column",{attrs:{align:"center",label:"操作",width:"100px"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return a.handleDelete(t)}}},[a._v("删除")])]}}])})],1),a._v(" "),r("div",{staticClass:"common_pagination_wrapper"},[r("el-pagination",{attrs:{"current-page":a.pagination.page,"page-size":a.pagination.limit,"page-sizes":[10,20,30,50,100],total:a.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return a.$set(a.pagination,"page",e)},"update:current-page":function(e){return a.$set(a.pagination,"page",e)},"current-change":a.handleCurrentChange,"size-change":a.handleSizeChange}})],1),a._v(" "),r("el-dialog",{attrs:{title:a.textMap[a.dialogStatus],visible:a.oneKeyCrawlFlag,width:"850px"},on:{"update:visible":function(e){a.oneKeyCrawlFlag=e}}},[r("el-row",{attrs:{justify:"center",type:"flex"}},[r("el-col",{attrs:{span:20}},[r("el-form",{ref:"formData",attrs:{model:a.formData,rules:a.rules,"label-position":"right","label-width":"140px"}},[r("el-form-item",{attrs:{label:"爬虫类型",prop:"rewardType"}},[r("el-select",{attrs:{placeholder:""},on:{change:a.chooseRewardType},model:{value:a.formData.rewardType,callback:function(e){a.$set(a.formData,"rewardType",e)},expression:"formData.rewardType"}},a._l(a.settingsList,function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.value}})}),1)],1),a._v(" "),r("el-form-item",{attrs:{label:"爬虫地址",prop:"crawlerAddress"}},[r("el-input",{model:{value:a.formData.crawlerAddress,callback:function(e){a.$set(a.formData,"crawlerAddress",e)},expression:"formData.crawlerAddress"}})],1)],1)],1)],1),a._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(e){a.oneKeyCrawlFlag=false}}},[a._v(a._s(a.$t("table.cancel")))]),a._v(" "),r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:a.crawlerData}},[a._v(a._s(a.$t("table.confirm")))])],1)],1)],1)};var n=[];r._withStripped=true;a.d(t,"a",function(){return r});a.d(t,"b",function(){return n})},ZPOm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a("4d7F");var n=p(r);var i=a("P2sY");var o=p(i);var l=a("14Xm");var s=p(l);var c=a("D3Ub");var u=p(c);var d=a("O4qd");var f=p(d);function p(e){return e&&e.__esModule?e:{default:e}}t.default={components:{CommonQuery:f.default},data:function e(){var a=this;return{getListByPaginationRequest:"crawlerMaoyanBoxOffice/getListByPagination",crawlAndSaveRequest:"crawlerMaoyanBoxOffice/crawlAndSave",deleteRecordRequest:"crawlerMaoyanBoxOffice/deleteRecords",getSettingsRequest:"settings/getList",crawlerSettingFlag:false,crawlerSetting:{address:""},chosenReward:"",chooseRewardTypeModel:{},chosenThirdPartyProductInfo:{},value2:"",value1:"",dailyLimitMode:"",limitMode:"",tableKey:0,tableList:[],total:null,listLoading:true,availabilityFlag:false,statusDictionary:[{code:0,name:"未上线"},{code:1,name:"上线"}],queryModel:{sort:"desc",brandName:""},pagination:{page:1,limit:50},importanceOptions:[1,2,3],sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],statusOptions:["published","draft","deleted"],showReviewer:false,formData:{headerCode:"maoyan",crawlerAddress:""},dialogFormVisible:false,dialogStatus:"",textMap:{update:"Edit",create:"Create"},dialogPvVisible:false,rules:{id:[{required:true,message:"此项为必填项",trigger:"change"}],description:[{required:true,message:"此项为必填项",trigger:"change"}],name:[{required:true,message:"此项为必填项",trigger:"change"}],dailyLimit:[{required:true,message:"此项为必填项",trigger:"change"}],limit:[{required:true,message:"此项为必填项",trigger:"change"}],startDate:[{required:true,message:"此项为必填项",trigger:"change"}],endDate:[{required:true,message:"此项为必填项",trigger:"change"}],status:[{required:true,message:"此项为必填项",trigger:"change"}]},downloadLoading:false,pickerOptions0:{disabledDate:function e(t){if(a.value2!==""){return t.getTime()>a.value2}}},pickerOptions1:{disabledDate:function e(t){return t.getTime()<a.value1}},fileList:[],portraitParams:{bucketName:"funyvalley",folderName:"icon"},iosVersionListData:[],androidVersionListData:[],searchTxt:"",expandQuery:"",showFileListFlag:false,newFile:"",advertisementDialogFlag:false,currentAdvertisementTabIndex:0,effectiveDuration:[],multipleSelection:[],oneKeyCrawlFlag:false,settingsList:[]}},computed:{tableHeight:function e(){return this.$store.state.app.tableHeight},dictionaryList:function e(){return this.$store.state.app.dictionary.crawlerAddress}},watch:{effectiveDuration:function e(t){console.log(t);if(t===null){t=[]}this.formData.startDate=this.$moment(t[0]).format("YYYY-MM-DD");this.formData.endDate=this.$moment(t[1]).format("YYYY-MM-DD")},currentAdvertisementTabIndex:function e(t){console.log(t)}},mounted:function e(){var a=this;return(0,u.default)(s.default.mark(function e(){return s.default.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return a.getSettingsDictionary();case 2:a.settingsList=t.sent;a.getTableData();case 4:case"end":return t.stop()}}},e,a)}))()},methods:{getTableData:function e(){var a=this;this.listLoading=true;this.queryModel=(0,o.default)(this.queryModel,this.pagination);this.$http.get(this.$baseUrl+this.getListByPaginationRequest,{params:this.queryModel}).then(function(e){console.log("getListByPaginationRequest",e);var t=e.data.map(function(e,t){return(0,o.default)(e,{_index:t})});a.tableList=t;a.total=e.pagination.total;a.listLoading=false})},getSettingsDictionary:function e(){var r=this;return new n.default(function(t,a){r.$http.get(r.$baseUrl+r.getSettingsRequest,{params:{type:"crawlerAddress"}}).then(function(e){t(e.data)}).catch(function(e){console.log(e);a(e)})})},handleFilter:function e(){this.pagination.page=1;this.getTableData()},handleSizeChange:function e(t){this.pagination.limit=t;this.getTableData()},handleCurrentChange:function e(t){this.pagination.page=t;this.getTableData()},resetTemp:function e(){this.formData={id:"",description:"",rewardImage:"",rewardName:"",rewardPrompt:"",rewardStr:"",rewardType:"",rewardValue:"",status:""}},crawlerData:function e(){var t=this;this.$http.post(this.$baseUrl+this.crawlAndSaveRequest,{address:this.formData.crawlerAddress,headerCode:this.formData.headerCode}).then(function(e){console.log(e);t.$message.success("抓取成功");t.getTableData();t.oneKeyCrawlFlag=false})},createData:function e(){this.formData.id="";this.updateData()},handleUpdate:function e(t){var a=this;console.log(t);this.formData=(0,o.default)({},t.row);this.dialogStatus="update";this.dialogFormVisible=true;this.$nextTick(function(){a.$refs["formData"].clearValidate()})},updateData:function e(){var t=this;this.$refs["formData"].validate(function(e){if(e){t.$http.post(t.$baseUrl+t.addAndUpdateRewardInfoRequest,{id:t.formData.id,description:t.formData.description,rewardImage:t.formData.rewardImage,rewardName:t.formData.rewardName,rewardPrompt:t.formData.rewardPrompt,rewardStr:t.formData.rewardStr,rewardType:t.formData.rewardType,rewardValue:t.formData.rewardValue,status:t.formData.status}).then(function(e){console.log(e);t.dialogFormVisible=false;t.$message.success("信息修改成功");t.getTableData()}).catch(function(e){console.log(e);t.$message.error(e.response.status.toString()+"  "+e.response.data.error)})}})},handleSelectionChange:function e(t){this.multipleSelection=t;console.log(t)},handleMultipleDelete:function e(){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteRecord(t.multipleSelection.map(function(e){return e.id}))}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleDelete:function e(t){var a=this;console.log(t);this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.deleteRecord([t.row.id])}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},deleteRecord:function e(t){var a=this;this.$http.delete(this.$baseUrl+this.deleteRecordRequest,{data:{id:t}}).then(function(e){console.log(e);a.dialogFormVisible=false;a.$message.success("删除成功");a.getTableData()}).catch(function(e){console.log(e);a.$message.error(e.response.status.toString()+"  "+e.response.data.error)})},expand:function e(){this.expandQuery=!this.expandQuery},search:function e(){this.getTableData()},reset:function e(){this.queryModel.available=true},uploadSuccess1:function e(t){console.log(t);this.formData.icon=t.url},uploadSuccess2:function e(t){this.formData.rewardImage=t.url},changeDailyLimitMode:function e(t){this.formData.dailyLimit=t.toString()==="unlimited"?"-1":this.formData.dailyLimit},changeLimitMode:function e(t){this.formData.limit=t.toString()==="unlimited"?"-1":this.formData.limit;alert(this.formData.limit)},chooseRewardType:function e(t){this.formData.type=this.settingsList.filter(function(e){return e.value===t})[0].code;this.formData.crawlerAddress=t},chooseThirdPartyProduct:function e(t){this.chosenThirdPartyProductInfo=t},confirmCrawlerSetting:function e(){this.crawlerSettingFlag=false;this.$message.success("设置成功")},focusSortList:function e(t,r){var n=this;this.loading=true;this.$http.get(this.$baseUrl+this.queryRewardProductByNameRequest,{params:{name:this.chosenReward}}).then(function(e){console.log(e);n.loading=false;var a=[];if(e.data.length!==0){e.data.forEach(function(e,t){a.push((0,o.default)(e,{value:e.name}))});console.log(111,a);r(a)}})},handleClickRow:function e(t,a,r){console.log("row",t);console.log("column",a);console.log("e",r)}}}},vPuT:function(e,t,a){"use strict";a.r(t);var r=a("02K0");var n=a.n(r);for(var i in r)if(i!=="default")(function(e){a.d(t,e,function(){return r[e]})})(i);t["default"]=n.a},"z/Gj":function(e,t,a){"use strict";var r=a("NOzE");var n=a.n(r);var i=n.a}}]);